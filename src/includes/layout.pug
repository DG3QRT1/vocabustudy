doctype html
html.has-navbar-fixed-top(lang="en" style="overflow-x: hidden; overflow-y: auto;")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title #{title || "Home"} - Vocabustudy
        meta(property="og:title" content=`${title || "Home"} - Vocabustudy`)
        meta(property="og:description" content=`${description || "Study and build vocabulary for free"}`)
        meta(name="description" content=`${description || "Study and build vocabulary for free"}`)
        meta(property="og:type" content="website")
        meta(property="og:image" content="./og_banner.png")
        meta(property="og:site_name" content="Vocabustudy")
        link(rel="icon" href="icons/favicon.ico" sizes="any")
        link(rel="apple-touch-icon" href="icons/apple-touch-icon.png")
        block main-stylesheet
            link(rel="stylesheet" href="css/styles.scss")
        link(rel="stylesheet" href="css/bulma-style-light.scss" id="light-stylesheet")
        link(rel="stylesheet" href="css/bulma-style-dark.scss" id="dark-stylesheet")
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200")
        link(rel="preconnect" href="https://fonts.googleapis.com")
        link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap")
        link(rel="manifest" href="./app.webmanifest")
        script(src="js/sentry.js" type="module")
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "Vocabustudy",
                "applicationCategory": "BrowserApplication,EducationalApplication",
                "operatingSystem": "Browser",
                "offers": {
                    "@type": "Offer",
                    "price": "0"
                }
            }
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebSite",
                "name": "Vocabustudy",
                "url": "https://vocabustudy.org/"
            }
        block extrahead
    body
        block navbar
            nav.navbar.is-primary.is-fixed-top(role="navigation" aria-label="main navigation")
                .navbar-brand
                    a.navbar-item(href="/#")
                        img.nohuechange(src="icons/icon-192.png" height="28" style="border: 1px solid #fff8; border-radius: 0.5rem;")
                    a.navbar-burger(role="button" aria-label="menu" aria-expanded="false" data-target="main-navbar")
                        span(aria-hidden="true")
                        span(aria-hidden="true")
                        span(aria-hidden="true")
                #main-navbar.navbar-menu 
                    .navbar-start
                        a.navbar-item(href="/#") Home
                        a.navbar-item(href="/#search") Browse Sets
                        a.navbar-item(href="/#donate") Donate
                        a.navbar-item(href="/help-center/") Help
                    .navbar-end
                        .navbar-item.has-dropdown.is-hoverable
                            a.navbar-link Account
                            .navbar-dropdown
                                a.navbar-item(href="/#saved-sets") Saved Sets
                                a.navbar-item.loggedin(hidden href="/#mysets") My Sets
                                a.navbar-item.loggedin.adminonly(hidden href="/#admin") Admin Portal
                                hr.navbar-divider
                                a.navbar-item.loggedin(hidden href="/#account") My Account
                                span#btn-logout.navbar-item.loggedin(hidden) Log Out
                                a.navbar-item.loggedout(hidden href="/#login") Log In
        main
            block content
        div.fab-theme-container
            button.button.is-primary.fab-theme.is-floating.is-light(aria-label="Theme" title="Change Theme")
                i.material-symbols-rounded brightness_high
            div
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="System")
                    i.material-symbols-rounded settings_brightness
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="Dark")
                    i.material-symbols-rounded brightness_4
                button.button.is-primary.fab-theme.is-floating(aria-label="Light" title="Light")
                    i.material-symbols-rounded brightness_high
        // TODO change to bulma responsive design
        footer(style="position: relative;")
            p
                span v#{process.env.npm_package_version} | &copy; 2022 Siddhant K. All Rights Reserved. 
                    a.a(href="/#credits") Credits
                span v#{process.env.npm_package_version} - 
                    a.a(href="/#credits") Credits
            div
                div
                    a.a(href="/privacy/") Privacy Policy
                    |  | 
                    a.a(href="/#discord") Discord
                    |  | 
                    a.a(href="https://nightly.vocabustudy.org/" target="_blank") Nightly 
                    a(href="https://github.com/For-0/vocabustudy/blob/main/README.md#what-is-nightly" style="color:white") (?)
                    |  | 
                    a.a(href="https://github.com/orgs/For-0/projects/2/insights/1" target="_blank") Leaderboard
                div(style="transform-origin: right; transform: scale(0.8);")
                    a.mdc-icon-button(href="/privacy/" title="Privacy")
                        .mdc-icon-button__ripple
                        i.material-symbols-rounded security
                    a.mdc-icon-button(href="/#discord" title="Discord")
                        .mdc-icon-button__ripple
                        i.material-symbols-rounded question_answer
                    a.mdc-icon-button(href="https://nightly.vocabustudy.org/" target="_blank" title="Nightly")
                        .mdc-icon-button__ripple
                        i.material-symbols-rounded bug_report
                    a.mdc-icon-button(href="https://github.com/orgs/For-0/projects/2/insights/1" title="Leaderboard")
                        .mdc-icon-button__ripple
                        i.material-symbols-rounded leaderboard
        block scripts-footer
            script.
                if (location.host === "vocabustudyonline.web.app" && !localStorage.getItem("use_vocabustudyonline")) location.host = "vocabustudy.org";
                const navbar = {
                    btnLogout: document.getElementById("btn-logout"),
                    burger: document.querySelector(".navbar-burger"),
                    menu: document.getElementById("main-navbar")
                };
                const fabs = {
                    theme: document.querySelector(".fab-theme"),
                    themeContainer: document.querySelector(".fab-theme-container"),
                    themeOptions: document.querySelectorAll(".fab-theme-container > div button")
                };
                showTheme(localStorage.getItem("theme"));
                setHue(localStorage.getItem("theme_hue"));
                const themes = ["system", "dark", "light"];
                function showTheme(theme) {
                    document.body.classList.remove("theme-dark", "theme-system");
                    switch(theme) {
                        case "dark":
                            fabs.theme.querySelector("i").innerText = "brightness_4";
                            document.body.classList.add("theme-dark");
                            break;
                        case "system":
                            fabs.theme.querySelector("i").innerText = "settings_brightness";
                            document.body.classList.add("theme-system");
                            break;
                        case "light":
                            fabs.theme.querySelector("i").innerText = "brightness_high";
                            break;
                    }
                }
                function setHue(hue) {
                    if (parseInt(hue) > 0) {
                        document.documentElement.style.setProperty("--hue-rotated", hue)
                        document.documentElement.style.filter = `hue-rotate(calc(var(--hue-rotated) * 1deg))`;
                    } else document.documentElement.style.filter = "none";
                }
                addEventListener("DOMContentLoaded", () => {
                    navbar.burger.addEventListener("click", () => {
                        navbar.burger.classList.toggle("is-active");
                        navbar.menu.classList.toggle("is-active");
                    })
                    fabs.themeOptions.forEach((el, i) => {
                        el.addEventListener("click", () => {
                            showTheme(themes[i]);
                            localStorage.setItem("theme", themes[i]);
                        });
                    });
                    navbar.btnLogout.addEventListener("click", () => auth.signOut());
                });
                fabs.theme.addEventListener("click", e => {
                    e.stopPropagation();
                    fabs.themeContainer.classList.toggle("show")
                }, true);
                document.addEventListener("click", () => fabs.themeContainer.classList.remove("show"));
                document.querySelector("#btn-logout + a.loggedout").addEventListener("click", () => localStorage.removeItem("redirect_after_login"))