block variables
doctype html
html.has-navbar-fixed-top.custom-scrollbar(lang="en" style="overflow-x: hidden; overflow-y: auto;")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title #{title || "Home"} - Vocabustudy
        meta(property="og:title" content=`${title || "Home"} - Vocabustudy`)
        meta(property="og:description" content=`${description || "Study and build vocabulary for free"}`)
        meta(name="description" content=`${description || "Study and build vocabulary for free"}`)
        meta(property="og:type" content="website")
        meta(property="og:image" content="./og_banner.png")
        meta(property="og:site_name" content="Vocabustudy")
        link(rel="icon" href="icons/favicon.ico" sizes="any")
        link(rel="apple-touch-icon" href="icons/apple-touch-icon.png")
        block main-stylesheet
            link(rel="stylesheet" href="css/styles.scss")
        link(rel="stylesheet" href="css/bulma-style-light.scss" id="light-stylesheet")
        link(rel="stylesheet" href="css/bulma-style-dark.scss" id="dark-stylesheet" disabled)
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200")
        link(rel="preconnect" href="https://fonts.googleapis.com")
        link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
        link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap")
        link(rel="manifest" href="./app.webmanifest")
        script(src="js/sentry.js" type="module")
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "Vocabustudy",
                "applicationCategory": "BrowserApplication,EducationalApplication",
                "operatingSystem": "Browser",
                "offers": {
                    "@type": "Offer",
                    "price": "0"
                }
            }
        script(type="application/ld+json").
            {
                "@context": "https://schema.org",
                "@type": "WebSite",
                "name": "Vocabustudy",
                "url": "https://vocabustudy.org/"
            }
        block extrahead
    body
        block navbar
            nav.navbar.is-primary.is-fixed-top(role="navigation" aria-label="main navigation")
                .navbar-brand.is-justify-content-space-between
                    a.navbar-item(href="/#")
                        img.nohuechange(src="icons/icon-192.png" height="28" style="border: 1px solid #fff8; border-radius: 0.5rem;")
                    a.navbar-burger(role="button" aria-label="menu" aria-expanded="false" data-target="main-navbar")
                        span(aria-hidden="true")
                        span(aria-hidden="true")
                        span(aria-hidden="true")
                #main-navbar.navbar-menu
                    .navbar-start
                        a.navbar-item(href="/#") Home
                        a.navbar-item(href="/#search") Browse Sets
                        a.navbar-item(href="/#donate") Donate
                        a.navbar-item(href="/help-center/") Help
                    .navbar-end
                        .navbar-item.has-dropdown.is-hoverable
                            a.navbar-link.is-arrowless 
                                i.material-symbols-rounded.is-filled.is-hidden-touch account_circle
                                span.is-hidden-desktop Account
                                i.material-symbols-rounded.is-hidden-touch arrow_drop_down
                            .navbar-dropdown.is-right.is-centered(style="border-top-left-radius: 6px;")
                                a.navbar-item(href="/#saved-sets") Saved Sets
                                a.navbar-item.loggedin(hidden href="/#mysets") My Sets
                                a.navbar-item.loggedin.adminonly(hidden href="/#admin") Admin Portal
                                hr.navbar-divider
                                a.navbar-item.loggedin(hidden href="/#account") My Account
                                span#btn-logout.navbar-item.is-clickable.loggedin(hidden) Log Out
                                a.navbar-item.loggedout(hidden href="/#login") Log In
        main
            block content
        div.fab-theme-container
            button.button.is-primary.fab-theme.is-floating.is-light(aria-label="Theme" title="Change Theme")
                i(style="font-size: 1.5rem;").material-symbols-rounded brightness_high
            div
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="System")
                    i.material-symbols-rounded brightness_medium
                button.button.is-primary.fab-theme.is-floating(aria-label="Theme" title="Dark")
                    i.material-symbols-rounded brightness_low
                button.button.is-primary.fab-theme.is-floating(aria-label="Light" title="Light")
                    i.material-symbols-rounded brightness_high
                button.button.is-primary.fab-theme.is-floating.btn-change-hue(hidden aria-label="Hue" title="Set Hue")
                    i.material-symbols-rounded.is-filled palette
        // TODO change to bulma responsive design
        footer.footer.level.is-mobile(style="position: relative;")
            p.level-item
                span.mr-1 v#{process.env.npm_package_version}
                span.is-hidden-mobile.mr-1  | &copy; 2022 Siddhant K. All Rights Reserved
                | - 
                a.has-text-white.is-underlined.ml-1(href="/#credits") Credits
            div.level-item
                div.is-hidden-mobile
                    a.has-text-white.is-underlined(href="/privacy/") Privacy Policy
                    |  | 
                    a.has-text-white.is-underlined(href="/#youtube") YouTube
                    |  | 
                    a.has-text-white.is-underlined(href="/#discord") Discord
                    |  | 
                    a.has-text-white.is-underlined(href="https://github.com/orgs/For-0/projects/2/insights/1" target="_blank") Bug Leaderboard
                div.is-hidden-tablet(style="transform: scale(0.8);")
                    a.has-text-white.mr-3.is-filled.icon(href="/privacy/" title="Privacy")
                        i.material-symbols-rounded verified_user
                    a.has-text-white.mr-3.is-filled.icon(href="/#youtube" title="YouTube")
                        i.material-symbols-rounded subscriptions
                    a.has-text-white.mr-3.is-filled.icon(href="/#discord" title="Discord")
                        img.credits-brandicons(src="icons/brands/discord.svg" style="height: 1.5rem; width: 1.5rem;")
                    a.has-text-white.mr-3.is-filled.icon(href="https://github.com/orgs/For-0/projects/2/insights/1" title="Bug Leaderboard")
                        i.material-symbols-rounded leaderboard
        block scripts-footer
            script.
                console.info("%cOrchestra is better than Band*\n%c*But Art is the best", "background-color: #795548; color: white; font-size: 96px; font-weight: bold; border-radius: 4px; font-style: italic;", "font-size: 12px; font-style: italic;");
                if (location.host === "vocabustudyonline.web.app" && !localStorage.getItem("use_vocabustudyonline")) location.host = "vocabustudy.org";
                const navbar = {
                    btnLogout: document.getElementById("btn-logout"),
                    burger: document.querySelector(".navbar-burger"),
                    menu: document.getElementById("main-navbar")
                };
                const fabs = {
                    theme: document.querySelector(".fab-theme"),
                    themeContainer: document.querySelector(".fab-theme-container"),
                    themeOptions: document.querySelectorAll(".fab-theme-container > div button:not(:last-child)")
                };
                showTheme(localStorage.getItem("theme"));
                setHue(localStorage.getItem("theme_hue"));
                const themes = ["system", "dark", "light"];
                function showTheme(theme) {
                    document.body.classList.remove("theme-dark", "theme-system");
                    switch(theme) {
                        case "dark":
                            fabs.theme.querySelector("i").innerText = "brightness_low";
                            document.body.classList.add("theme-dark");
                            break;
                        case "system":
                            fabs.theme.querySelector("i").innerText = "brightness_medium";
                            document.body.classList.add("theme-system");
                            break;
                        case "light":
                            fabs.theme.querySelector("i").innerText = "brightness_high";
                            break;
                    }
                }
                function setHue(hue) {
                    if (parseInt(hue) > 0) {
                        document.documentElement.style.setProperty("--hue-rotated", hue)
                        document.documentElement.style.filter = `hue-rotate(calc(var(--hue-rotated) * 1deg))`;
                    } else {
                        document.documentElement.style.removeProperty("--hue-rotated");
                        document.documentElement.style.filter = "none";
                    }
                }
                addEventListener("DOMContentLoaded", () => {
                    navbar.burger.addEventListener("click", () => {
                        navbar.burger.classList.toggle("is-active");
                        navbar.menu.classList.toggle("is-active");
                    });
                    navbar.menu.addEventListener("click", () => {
                        navbar.burger.classList.remove("is-active");
                        navbar.menu.classList.remove("is-active");
                    });
                    fabs.themeOptions.forEach((el, i) => {
                        el.addEventListener("click", () => {
                            showTheme(themes[i]);
                            localStorage.setItem("theme", themes[i]);
                        });
                    });
                    navbar.btnLogout.addEventListener("click", () => window.signOut());
                });
                fabs.theme.addEventListener("click", e => {
                    e.stopPropagation();
                    fabs.themeContainer.classList.toggle("show")
                }, true);
                document.addEventListener("click", () => fabs.themeContainer.classList.remove("show"));
                document.querySelector("#btn-logout + a.loggedout").addEventListener("click", () => localStorage.removeItem("redirect_after_login"))
